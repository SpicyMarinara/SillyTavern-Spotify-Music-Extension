<div class="moodmusic-settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>Spotify Music Settings</b>
            <div class="inline-drawer-icon fa-solid fa-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">
            <!-- Spotify Credentials Configuration -->
            <div class="moodmusic-creds-config">
                <b>Spotify Credentials:</b> <span id="moodmusic-creds-status">Checking...</span>
                <div>
                    <label for="moodmusic-client-id" style="display: block; margin-top: 5px;">Client ID:</label>
                    <input type="text" id="moodmusic-client-id" class="text_pole" placeholder="Spotify Client ID">
                </div>
                <div>
                    <label for="moodmusic-client-secret" style="display: block; margin-top: 5px;">Client Secret:</label>
                    <input type="password" id="moodmusic-client-secret" class="text_pole" placeholder="Spotify Client Secret">
                </div>
                <div style="margin-top: 8px; margin-bottom: 5px;">
                    <button id="moodmusic-save-creds-button" class="menu_button" style="margin-right: 5px;">
                        <i class="fa-solid fa-save"></i> Save Credentials
                    </button>
                    <button id="moodmusic-clear-creds-button" class="menu_button danger_button" style="font-size: 0.9em;">
                        <i class="fa-solid fa-trash"></i> Clear Saved
                    </button>
                </div>
                <p style="margin: 0 0 10px 0; font-size: 0.9em; color: #888;"><i class="fa-solid fa-info-circle"></i> Credentials are automatically saved and persist between sessions.</p>
            </div>
            <hr style="margin: 10px 0;">
            <!-- Authentication and Controls -->
            <div class="moodmusic-auth-status">
                <span>Auth Status: </span><span id="moodmusic-status">Checking...</span>
            </div>
            <button id="moodmusic-login-button" class="menu_button" style="margin-right: 5px;">
                <i class="fa-brands fa-spotify"></i> Login to Spotify
            </button>
            <button id="moodmusic-toggle-button" class="menu_button" style="margin-right: 5px;">
                <i class="fa-solid fa-pause"></i> Pause Music
            </button>
            <button id="moodmusic-switch-model-button" class="menu_button" style="margin-right: 5px;">
                <i class="fa-solid fa-exchange-alt"></i> Switch Model
            </button>
            <button id="moodmusic-logout-button" class="menu_button danger_button" style="display: none;">
                <i class="fa-solid fa-sign-out-alt"></i> Logout (Not Implemented)
            </button>
            <div style="margin-top: 8px;">
                <p style="margin: 0; font-size: 0.9em; color: #888;"><strong>Model Mode:</strong> <span id="moodmusic-model-status">Music.json preset</span></p>
                <p style="margin: 0; font-size: 0.85em; color: #999;"><i class="fa-solid fa-info-circle"></i> Switch between using the Music.json preset or your current main model for song requests.</p>
            </div>
            <hr style="margin: 15px 0 10px 0;">
            <!-- Liked Songs Fallback Configuration -->
            <div class="moodmusic-liked-config">
                <b>Fallback when AI suggestions aren't found:</b>
                <div style="margin-top: 8px;">
                    <label class="checkbox_label">
                        <input type="checkbox" id="moodmusic-use-liked-fallback" checked>
                        <span>Play from my Liked Songs on Spotify</span>
                    </label>
                </div>
                <div style="margin-top: 5px;">
                    <button id="moodmusic-test-liked-button" class="menu_button" style="margin-right: 5px; font-size: 0.9em;">
                        <i class="fa-solid fa-heart"></i> Test Liked Songs
                    </button>
                </div>
                <p style="margin: 5px 0 0 0; font-size: 0.85em; color: #999;"><i class="fa-solid fa-info-circle"></i> When enabled, your Liked Songs will automatically start playing (shuffled) if the AI suggests something unavailable on Spotify.</p>
            </div>
            <p style="margin-top: 5px;"><small>ðŸŽµ <strong>Automatically</strong> plays Spotify music based on chat mood when characters respond. Use the Pause/Resume button to disable/enable automatic suggestions.</small></p>
		</div>
	</div>
</div>
